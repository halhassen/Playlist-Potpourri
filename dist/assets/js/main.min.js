!function(){"use strict";function e(e,t){e.state("Home",{url:"/",templateUrl:"templates/home.html",controller:"PlaylistController",controllerAs:"vm"}).state("Register",{url:"/register",templateUrl:"templates/register.html",controller:"UserController",controllerAs:"vm"}),t.otherwise("/")}angular.module("app",["ui.router"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t){var o=this;o.uiRouterState=e,o.status=t._user,$("nav ul li").click(function(){var e=$(this).data("xcoord");$("nav div").stop().animate({marginLeft:e},100,"easeInOutExpo"),$(this).addClass("active"),$("nav ul li").not(this).removeClass("active")})}angular.module("app").controller("NavController",e),e.$inject=["$state","$rootScope"]}(),function(){"use strict";function e(e,t,o){var r=this;r.playlists=[],r.createPlaylist=function(t){r.playlist=t,console.log(r.playlist),e.createPlaylist(r.playlist).then(function(e){r.playlist={},$state.go("Home")})},r.deletePlaylist=function(t){e.deletePlaylist(t).then(function(e){r.playlists.splice(t,1)})},r.getUser=function(t){e.getUser(t).then(function(e){console.log(e),r.userData=e})},r.play=function(e){console.log(e),SC.oEmbed(e,{auto_play:!0},function(e){o.$apply(o.player_html=t.trustAsHtml(e.html))})}}angular.module("app").controller("PlaylistController",e),e.$inject=["PlaylistFactory","$sce","$scope"]}(),function(){"use strict";function e(e,t,o,r){var n=this;n.register=function(){e.register(n.user).then(function(){n.user={},t.go("Home")})},n.login=function(){e.login(n.user).then(function(e){e?n.confirm=e:(n.status=o._user,t.go("Home"))})},n.logout=function(){e.logout(),n.status=o._user,r.location.reload(),t.go("Home")}}angular.module("app").controller("UserController",e),e.$inject=["UserFactory","$state","$rootScope","$window"]}(),function(){"use strict";function e(e,t){var o={};return o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){var o={};return o.getUser=function(o){var r=t.defer();return e.get("http://api.soundcloud.com/users/"+o+"/tracks.json?client_id=8a2b64488a5c1f890b33d29a2835773c").success(function(e){r.resolve(e)}),r.promise},o}angular.module("app").factory("PlaylistFactory",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o,r){function n(e){localStorage.setItem("token",e)}function s(){localStorage.removeItem("token")}function l(){return localStorage.token}function a(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string"}return decodeURIComponent(escape(o.atob(t)))}var i={};return i.isLoggedIn=function(){var e=l();if(!e)return!1;var t=JSON.parse(a(e.split(".")[1]));return t.exp>Date.now()/1e3?t:void 0},i.register=function(o){var r=t.defer();return e.post("/api/user/register",o).success(function(e){r.resolve()}),r.promise},i.login=function(o){var s=t.defer();return e.post("/api/user/login",o).success(function(e){return n(e.token),e.token?(r._user=i.isLoggedIn(),void s.resolve()):(s.resolve(e),void localStorage.removeItem("token"))}).error(function(e,t){s.resolve(e)}),s.promise},i.logout=function(){s(),r._user=i.isLoggedIn()},i.getUserLoggedIn=function(o){var r=t.defer();return e.get("/api/user/"+o).success(function(e){r.resolve(e)}),r.promise},i.saveToken=function(e){console.log("DEBUG: UserFactory saveToken called"),window.localStorage.setItem("token",e)},r._user=i.isLoggedIn(),i}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q","$window","$rootScope"]}();